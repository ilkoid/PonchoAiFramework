# –ü–ª–∞–Ω —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è - PonchoFramework Phase 3

## –¶–µ–ª—å: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Phase 3 Tool Implementation

**–§–æ–∫—É—Å:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏, —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ñ–µ—à–Ω-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏
**–ü–æ–¥—Ö–æ–¥:** –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–ª–∞–Ω

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç GenKit –≤–µ—Ä—Å–∏–∏:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `models/common/client.go` –≤–º–µ—Å—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ HTTP –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `interfaces.Logger` –≤–º–µ—Å—Ç–æ `log.Logger`  
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `interfaces.WildberriesConfig` –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `interfaces.PonchoTool` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `core/config/tool_factory.go`

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ endpoints:**
- `/content/v2/object/parent/all` - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `/content/v2/object/all` - –ø—Ä–µ–¥–º–µ—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `/content/v2/object/charcs/{id}` - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–∞

---

## üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–°–µ–≥–æ–¥–Ω—è)

### 1. Wildberries API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** üîÑ –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### 1.1 Wildberries API Client
- **–§–∞–π–ª:** `tools/wildberries/client.go`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `models/common.HTTPClient` –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `interfaces.Logger` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `interfaces.WildberriesConfig` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry —á–µ—Ä–µ–∑ `models/common/client.go`
- **–ú–µ—Ç–æ–¥—ã:**
  - `GetParentCategories()` - –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `GetSubjects()` - –ø—Ä–µ–¥–º–µ—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  - `GetSubjectCharacteristics()` - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–∞

#### 1.2 Wildberries Categories Tool
- **–§–∞–π–ª:** `tools/wildberries/categories.go`
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `interfaces.PonchoTool`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
  - JSON schema –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Wildberries –∫–ª–∏–µ–Ω—Ç–æ–º
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ config.yaml)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `wb_categories` –∏–∑ config.yaml

#### 1.3 Wildberries Characteristics Tool  
- **–§–∞–π–ª:** `tools/wildberries/characteristics.go`
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `interfaces.PonchoTool`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–æ ID –ø—Ä–µ–¥–º–µ—Ç–∞
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  - Fashion-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### 2. Vision Analysis Tool
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** ‚è≥ –û–∂–∏–¥–∞–µ—Ç

#### 2.1 Fashion Vision Analyzer
- **–§–∞–π–ª:** `tools/vision/analyzer.go`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** Z.AI GLM-4.6V –º–æ–¥–µ–ª—å —á–µ—Ä–µ–∑ framework
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
  - –ê–Ω–∞–ª–∏–∑ —Ñ–µ—à–Ω-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ `framework.Generate()`
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (–º–∞—Ç–µ—Ä–∏–∞–ª, —Å—Ç–∏–ª—å, —Å–µ–∑–æ–Ω)
  - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–¥–µ–∂–¥—ã –¥–ª—è Wildberries
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `vision_analyzer` –∏–∑ config.yaml

### 3. Flow Orchestrators
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–∞–∂–Ω—ã–π
**–°—Ç–∞—Ç—É—Å:** ‚è≥ –û–∂–∏–¥–∞–µ—Ç

#### 3.1 Article Processor Flow
- **–§–∞–π–ª:** `flows/article_processor/flow.go`
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `interfaces.PonchoFlow`
- **Workflow:**
  1. `article_importer` - –∏–º–ø–æ—Ä—Ç –∏–∑ S3
  2. `vision_analyzer` - –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
  3. `wb_categories` - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
  4. `deepseek-chat` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ config.yaml

#### 3.2 Mini-Agent Flow
- **–§–∞–π–ª:** `flows/mini_agent/flow.go`
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `interfaces.PonchoFlow`
- **Workflow:** AI –∞–≥–µ–Ω—Ç –¥–ª—è —Ñ–µ—à–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ config.yaml

#### 3.3 Common Orchestrator Utilities
- **–§–∞–π–ª:** `flows/common/orchestrator.go`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
  - Dependency resolution –¥–ª—è flows
  - Error handling –∏ recovery
  - Retry logic –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
  - –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 4. Framework Integration
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–∞–∂–Ω—ã–π
- –û–±–Ω–æ–≤–∏—Ç—å `core/config/tool_factory.go` –¥–ª—è Wildberries –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞—Ç—å `core/config/wildberries_tool_factory.go`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤ `core/framework.go`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config.yaml`

### 5. End-to-End Testing
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–∞–∂–Ω—ã–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è Wildberries API
- –¢–µ—Å—Ç—ã workflow –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

---

## üìã –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: Wildberries Foundation (9:00 - 11:30)
1. ‚úÖ **–ê–Ω–∞–ª–∏–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
2. üîÑ **–°–æ–∑–¥–∞—Ç—å `tools/wildberries/client.go` —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `models/common.HTTPClient`
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `interfaces.Logger`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ endpoints
3. ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `tools/wildberries/categories.go`**
   - `interfaces.PonchoTool` —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
   - JSON schema –≤–∞–ª–∏–¥–∞—Ü–∏—è
4. ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `tools/wildberries/characteristics.go`**
   - `interfaces.PonchoTool` —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
   - Fashion-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞

### –≠—Ç–∞–ø 2: Tool Factory Integration (11:30 - 12:30)
1. ‚è≥ **–°–æ–∑–¥–∞—Ç—å `core/config/wildberries_tool_factory.go`**
2. ‚è≥ **–û–±–Ω–æ–≤–∏—Ç—å `core/config/tool_factory.go`**
3. ‚è≥ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤ framework registry**

### –≠—Ç–∞–ø 3: Vision Integration (12:30 - 14:00)
1. ‚è≥ **–°–æ–∑–¥–∞—Ç—å `tools/vision/analyzer.go`**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Z.AI GLM —á–µ—Ä–µ–∑ framework
   - Fashion-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑
2. ‚è≥ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ vision —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**

### –≠—Ç–∞–ø 4: Flow Implementation (14:00 - 16:00)
1. ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `flows/article_processor/flow.go`**
2. ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `flows/mini_agent/flow.go`**
3. ‚è≥ **–°–æ–∑–¥–∞—Ç—å `flows/common/orchestrator.go`**

### –≠—Ç–∞–ø 5: Integration & Testing (16:00 - 18:00)
1. ‚è≥ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ framework**
2. ‚è≥ **End-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
3. ‚è≥ **Production –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

---

## üéØ –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ö –∫–æ–Ω—Ü—É –¥–Ω—è:**
- ‚úÖ Wildberries API –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ PonchoFramework
- ‚úÖ Vision –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ–µ—à–Ω-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ framework
- ‚úÖ Flow –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç complete workflows
- ‚úÖ –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Tool Factory
- ‚úÖ Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —Ç–µ—Å—Ç–∞–º–∏

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- Phase 3 completion: 100%
- Tool integration: 100% (—á–µ—Ä–µ–∑ factory pattern)
- End-to-end —Ç–µ—Å—Ç—ã: –ø—Ä–æ—Ö–æ–¥—è—Ç
- Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: –≥–æ—Ç–æ–≤–∞

---

## üìù –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã PonchoFramework
```go
// Wildberries –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
client := common.NewHTTPClient(config, retryConfig)

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
logger.Info("Wildberries API request", "endpoint", endpoint)

// Tool —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
type WildberriesCategoriesTool struct {
    *core.PonchoBaseTool
    client *wildberries.Client
    logger interfaces.Logger
}

// Factory –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
factory.RegisterFactory("wildberries_api", &WildberriesToolFactory{})
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```yaml
# –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ config.yaml:
tools:
  wb_categories:
    enabled: true
    timeout: 15s
    cache:
      enabled: true
      ttl: 1800s
    custom_params:
      locale: "ru"
```

### Flow –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```yaml
# –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ config.yaml:
flows:
  article_processor:
    dependencies:
      - "article_importer"
      - "wb_categories" 
      - "vision_analyzer"
```

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 14 –¥–µ–∫–∞–±—Ä—è 2025, 09:32*
*–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω, –ø–ª–∞–Ω –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ–¥ PonchoFramework*